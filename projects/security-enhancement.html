<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-commerce Security Enhancement Project - Mason Kim</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="project-details.css">
</head>
<body class="dark-theme">
    <nav class="navbar">
        <div class="nav-content">
            <a href="../index.html" class="nav-brand">Mason Kim</a>
            <div class="nav-links">
                <a href="../index.html#about">About</a>
                <a href="../index.html#experience">Experience</a>
                <a href="../index.html#projects">Projects</a>
                <a href="../index.html#contact">Contact</a>
            </div>
        </div>
    </nav>

    <main class="project-detail">
        <header class="project-header">
            <div class="container">
                <h1>E-commerce Security Enhancement Project</h1>
                <div class="project-meta">
                    <span class="project-period">January 2025 - Present</span>
                    <span class="project-status">Ongoing</span>
                </div>
                <div class="project-tags">
                    <span class="tech-tag">Security</span>
                    <span class="tech-tag">DevSecOps</span>
                    <span class="tech-tag">Penetration Testing</span>
                    <span class="tech-tag">API Security</span>
                    <span class="tech-tag">Shopify</span>
                    <span class="tech-tag">AWS</span>
                </div>
            </div>
        </header>

        <section class="project-content container">
            <div class="project-overview">
                <h2>Project Overview</h2>
                <p>Leading a comprehensive security enhancement initiative for Zinus's global e-commerce platform, focusing on identifying and remediating vulnerabilities through penetration testing and implementing robust security measures across multiple regions.</p>
            </div>

            <div class="project-challenges">
                <h2>Key Challenges</h2>
                <ul>
                    <li>Coordinating security testing with Shopify platform limitations</li>
                    <li>Managing vulnerabilities across multiple regional sites (US, MX, UK, AU)</li>
                    <li>Balancing security improvements with platform constraints</li>
                    <li>Implementing solutions compatible with third-party services</li>
                </ul>
            </div>

            <div class="project-methodology">
                <h2>Methodology & Approach</h2>
                <h3>Phase 1: Preparation & Planning (October 2024)</h3>
                <ul>
                    <li>Obtained necessary approvals from Shopify for security testing</li>
                    <li>Selected and engaged external security firm (Ebryx)</li>
                    <li>Defined testing scope and methodology</li>
                    <li>Established testing environments and accounts</li>
                </ul>

                <h3>Phase 2: Security Assessment (December 2024 - January 2025)</h3>
                <ul>
                    <li>Conducted grey-box web application penetration testing</li>
                    <li>Weekly progress meetings and status updates</li>
                    <li>Comprehensive vulnerability assessment</li>
                    <li>Detailed reporting and risk analysis</li>
                </ul>

                <h3>Phase 3: Remediation (January - March 2025)</h3>
                <ul>
                    <li>Implemented security patches and improvements</li>
                    <li>Enhanced API rate limiting and DDoS protection</li>
                    <li>Strengthened file upload security</li>
                    <li>Improved password complexity requirements</li>
                    <li>Added anti-clickjacking measures</li>
                </ul>

                <h3>Phase 4: Validation & Ongoing Improvements (April 2025 - Present)</h3>
                <ul>
                    <li>Conducted revalidation testing</li>
                    <li>Implemented additional security measures</li>
                    <li>Continuous monitoring and improvements</li>
                </ul>
            </div>

            <div class="project-findings">
                <h2>Key Findings & Solutions</h2>
                
                <div class="finding-item">
                    <h3>Critical Vulnerability: Rebuy API Key Exposure</h3>
                    <p><strong>Issue:</strong> Hardcoded API keys discovered in client-side JavaScript code, exposing Rebuy Engine API credentials and enabling unauthorized access to product data and cache manipulation.</p>
                    <p><strong>Impact:</strong> High severity (CVSS 7.5) - potential for data exfiltration, cache poisoning, and service disruption affecting all users.</p>
                    <div class="architecture-diagrams">
                        <h4>Security Architecture Analysis</h4>
                        
                        <div class="diagram-container">
                            <h5>Vulnerability Discovery Process</h5>
                            <img src="https://github.com/user-attachments/assets/f5c2c08a-9731-4f5e-a829-ef769641bc8e" alt="Vulnerability Discovery Process - Shows the methodology used to identify hardcoded API keys in client-side code" width="100%" style="max-width: 800px; height: auto;" />
                            <p class="diagram-caption">Comprehensive analysis workflow showing how the API key exposure vulnerability was discovered through source code review and network traffic analysis.</p>
                        </div>

                        <div class="diagram-container">
                            <h5>Attack Vector Analysis</h5>
                            <img src="https://github.com/user-attachments/assets/8d330773-8a41-44a7-b2c7-336e8040912c" alt="Attack Vector Analysis - Illustrates potential exploitation methods for the discovered vulnerabilities" width="100%" style="max-width: 800px; height: auto;" />
                            <p class="diagram-caption">Detailed breakdown of attack vectors including cache poisoning, data exfiltration, and service disruption scenarios.</p>
                        </div>

                        <div class="diagram-container">
                            <h5>Secure Architecture Implementation</h5>
                            <pre class="mermaid" aria-label="Rebuy API Secure Data Flow Sequence">
sequenceDiagram
    title Rebuy API Secure Data Flow Sequence
    actor User
    participant Shopify as "Shopify Store (Frontend)"
    participant Wonder as "Wonder Server (Proxy)"
    participant Rebuy as "Rebuy API (External)"
    participant Env as "Environment Variables"

    %% Initialization
    Note over User,Shopify: Initialization
    User->>Shopify: Visit Product Page
    activate Shopify

    Shopify->>Shopify: Extract Product ID and User ID
    Note right of Shopify: JavaScript extracts:\n- currentProductId\n- customerId

    %% Secure API Request
    Note over Shopify,Wonder: Secure API Request
    Shopify->>Wonder: GET /api/rebuy-proxy?\nuserId=123&amp;productIds=456\n&amp;currency=USD&amp;limit=10
    activate Wonder
    Note right of Wonder: No API Key in request\nHTTPS encrypted

    %% Security Validation
    Note over Wonder: Security Validation
    Wonder->>Wonder: CORS Validation
    Note right of Wonder: Check Origin:\nwww.zinus.com ✅

    Wonder->>Wonder: Rate Limiting Check
    Note right of Wonder: IP: 192.168.1.1\nRequests: 15/100 ✅

    Wonder->>Wonder: Input Validation
    Note right of Wonder: userId: Valid ✅\nproductIds: Valid ✅\ncurrency: USD ✅

    %% Secure External API Call
    Note over Wonder,Rebuy: Secure External API Call
    Wonder->>Env: Retrieve API Key
    activate Env
    Env-->>Wonder: REBUY_API_KEY 🔒
    deactivate Env

    Wonder->>Rebuy: GET /api/v1/custom/id/232697?\nkey=SECURE_API_KEY\n&amp;user_id=123&amp;product_ids=456
    activate Rebuy
    Note right of Rebuy: API Key from server only\nServer-to-server call

    %% Data Processing
    Note over Wonder: Data Processing
    Rebuy-->>Wonder: Raw Recommendation Data
    deactivate Rebuy
    Note left of Wonder: Full API response with\ninternal metadata

    Wonder->>Wonder: Data Sanitization
    Note right of Wonder: Remove sensitive fields:\n- Internal IDs\n- Debug info\n- API metadata

    Wonder->>Wonder: Response Caching
    Note right of Wonder: Cache for 5 minutes\nto improve performance

    %% Secure Response
    Note over Wonder,Shopify: Secure Response
    Wonder-->>Shopify: Sanitized JSON Response\n{\n  "products": [...],\n  "total_products": 10\n}
    deactivate Wonder
    Note left of Shopify: Clean data only\nNo sensitive info

    %% UI Rendering
    Note over User,Shopify: UI Rendering
    Shopify->>Shopify: Render Recommendations
    Shopify-->>User: Display Product Recommendations
    deactivate Shopify

    %% Error Handling (Alternative Flow)
    alt Error Scenario
        Wonder->>Wonder: Error Occurs
        Note right of Wonder: Network timeout,\nAPI error, etc.

        Wonder->>Wonder: Error Sanitization
        Note right of Wonder: Remove sensitive details:\n- Stack traces\n- Internal paths\n- API keys

        Wonder-->>Shopify: Safe Error Response\n{\n  "error": "Unable to fetch recommendations",\n  "timestamp": "2024-01-01T12:00:00Z"\n}
        Shopify->>Shopify: Fallback UI
        Note right of Shopify: Hide recommendation section\nor show default products
    end
                            </pre>
                            <p class="diagram-caption">Proposed secure architecture implementing server-side API proxy, environment-based credential management, and proper access controls.</p>
                        </div>

                        <div class="diagram-container">
                            <h5>Security Controls Framework</h5>
                            <img src="https://github.com/user-attachments/assets/1b27c710-a221-4554-bbc7-7b9a71bb10a3" alt="Security Controls Framework - Comprehensive security measures including monitoring, rate limiting, and incident response" width="100%" style="max-width: 800px; height: auto;" />
                            <p class="diagram-caption">Multi-layered security framework encompassing prevention, detection, and response mechanisms for API security.</p>
                        </div>

                        <div class="diagram-container">
                            <h5>Implementation Timeline & Phases</h5>
                            <pre class="mermaid" aria-label="Implementation timeline security comparison">
flowchart LR
  %% Security Enhancement: Before vs After

  subgraph Before["❌ BEFORE (Vulnerable)"]
    direction TB
    ShopifyBefore[Shopify Store]
    JSBefore[Browser JavaScript]
    RebuyBefore[Rebuy API]
    BeforeAnchor(( )):::invisible

    ShopifyBefore --> JSBefore
    JSBefore -- Direct API Call; API Key in URL; Visible in DevTools; No Rate Limiting --> RebuyBefore

    NoteJSBefore["🚨 API Key Exposed:\n497cd4712d15cfb2f8690d77b13f74779fbb6bf8"]:::note
    JSBefore -.-> NoteJSBefore
  end

  subgraph After["✅ AFTER (Secure)"]
    direction TB
    ShopifyAfter[Shopify Store]
    JSAfter[Browser JavaScript]
    WonderAfter["Wonder Server\n(Proxy)"]
    RebuyAfter[Rebuy API]
    AfterAnchor(( )):::invisible

    ShopifyAfter --> JSAfter
    JSAfter -- Secure Proxy Call; No API Key; CORS Protected; Rate Limited --> WonderAfter
    WonderAfter -- Server-to-Server; Secure API Key; Authenticated --> RebuyAfter

    NoteJSAfter["✅ No API Key\n✅ Proxy Endpoint Only"]:::note
    JSAfter -.-> NoteJSAfter

    NoteWonderAfter["🔒 API Key in Environment\n🛡️ Security Middleware\n📊 Request Logging"]:::note
    WonderAfter -.-> NoteWonderAfter
  end

  RiskBefore["🔴 CRITICAL RISKS:\n• API Key completely exposed\n• Unlimited API access\n• No request monitoring\n• Potential cost abuse\n• OWASP A02 violation"]:::note
  RiskAfter["🟢 SECURITY BENEFITS:\n• API Key protected (100%)\n• Rate limiting enabled\n• Request monitoring\n• Cost control\n• OWASP compliance"]:::note

  BeforeAnchor -.-> RiskBefore
  AfterAnchor -.-> RiskAfter

  classDef note fill:#fff7d6,stroke:#999,stroke-dasharray:3 3,color:#111;
  classDef invisible fill:none,stroke:none;
                            </pre>
                            <p class="diagram-caption">Strategic implementation roadmap showing emergency response actions, short-term security fixes, and long-term security infrastructure improvements.</p>
                        </div>
                    </div>
                    <p><strong>Solution:</strong> Implemented emergency API key rotation, migrated to server-side proxy architecture, and established comprehensive security monitoring with real-time threat detection.</p>
                </div>
                
                <div class="finding-item">
                    <h3>Rate Limiting Implementation</h3>
                    <p><strong>Issue:</strong> Multiple API endpoints lacked request rate limiting, potentially allowing brute-force attacks and service disruption.</p>
                    <p><strong>Solution:</strong> Implemented Negate security solution for DDoS protection and enhanced API rate limiting across all endpoints.</p>
                </div>

                <div class="finding-item">
                    <h3>File Upload Security</h3>
                    <p><strong>Issue:</strong> Unrestricted file uploads posed potential security risks.</p>
                    <p><strong>Solution:</strong> Implemented strict file type validation, limiting uploads to PDFs and images only.</p>
                </div>

                <div class="finding-item">
                    <h3>Email Bombing Prevention</h3>
                    <p><strong>Issue:</strong> Vulnerability allowing unlimited email sending without authentication.</p>
                    <p><strong>Solution:</strong> Implemented reCAPTCHA and IP-based rate limiting, coordinated with Secuvy for additional API security measures.</p>
                </div>

                <div class="finding-item">
                    <h3>Password Security</h3>
                    <p><strong>Issue:</strong> Weak password requirements in user registration.</p>
                    <p><strong>Solution:</strong> Enhanced frontend password validation and explored SSO integration options.</p>
                </div>

                <div class="finding-item">
                    <h3>Anti-Clickjacking Measures</h3>
                    <p><strong>Issue:</strong> Vulnerability to clickjacking attacks through iframe embedding.</p>
                    <p><strong>Solution:</strong> Implemented frame-ancestors restriction in Content Security Policy.</p>
                </div>
            </div>

            <div class="project-team">
                <h2>Project Team</h2>
                
                <div class="team-section">
                    <h3>Internal Team</h3>
                    <ul>
                        <li>
                            <strong>Mason (Junkuk) Kim</strong>
                            <span>Global DevOps Engineer</span>
                            <p>Led technical implementation and vulnerability remediation</p>
                        </li>
                        <li>
                            <strong>Giriraj "Giri" Sharma</strong>
                            <span>Data Privacy & Cybersecurity Manager</span>
                            <p>Overall project management and security coordination</p>
                        </li>
                        <li>
                            <strong>Derek Choi</strong>
                            <span>IT Infrastructure & Security Manager</span>
                            <p>Team leader who managed the entire security project and coordinated all implementation phases</p>
                        </li>
                    </ul>
                </div>

                <div class="team-section">
                    <h3>External Partners</h3>
                    <ul>
                        <li>
                            <strong>Ebryx, LLC</strong>
                            <p>Security assessment and penetration testing</p>
                            <ul>
                                <li>Syed Sherdil Hasan (Lead Security Engineer)</li>
                                <li>Muhammad Umer Ishaq (Project Manager)</li>
                                <li>Muhammad Anas (Security Engineer)</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="project-results">
                <h2>Current Status & Outcomes</h2>
                <ul>
                    <li>Successfully identified and categorized 8+ security vulnerabilities including critical API key exposure</li>
                    <li>Discovered high-severity Rebuy API vulnerability (CVSS 7.5) through comprehensive security research</li>
                    <li>Implemented immediate emergency response including API key rotation and server-side proxy architecture</li>
                    <li>Established comprehensive security monitoring with real-time threat detection capabilities</li>
                    <li>Enhanced security measures across multiple regional sites with multi-layered protection</li>
                    <li>Coordinated responsible disclosure process with affected vendors and security teams</li>
                    <li>Developed detailed security documentation and architectural diagrams for future reference</li>
                </ul>
            </div>

            <div class="project-learnings">
                <h2>Key Learnings & Best Practices</h2>
                <ul>
                    <li>Importance of thorough security testing before implementation</li>
                    <li>Value of coordinated approach with third-party service providers</li>
                    <li>Need for balance between security measures and platform limitations</li>
                    <li>Benefits of regular security assessments and continuous monitoring</li>
                </ul>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Mason Kim. All rights reserved.</p>
        </div>
    </footer>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'dark' });
    </script>
</body>
</html>
